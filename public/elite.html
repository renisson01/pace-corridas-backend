<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PACE â€” Atletas de Elite</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>body{background:#0f172a;}</style>
</head>
<body class="text-white min-h-screen pb-24">

<header class="bg-slate-800 border-b border-slate-700 sticky top-0 z-40 px-4 py-3 flex justify-between items-center">
  <a href="/" class="text-green-400 font-black text-xl">PACE</a>
  <h1 class="font-bold text-sm">ğŸ† Atletas de Elite</h1>
  <div></div>
</header>

<!-- CRITÃ‰RIOS DE ELITE -->
<div class="max-w-2xl mx-auto px-4 py-4">
  <div class="bg-gradient-to-r from-yellow-900/30 to-slate-800 border border-yellow-500/30 rounded-2xl p-4 mb-4">
    <h2 class="font-black text-yellow-400 mb-3">ğŸ“‹ CritÃ©rios de Elite PACE</h2>
    <div class="space-y-2 text-xs">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2"><span>â­</span><span class="font-bold text-yellow-400">Elite Mundial</span></div>
        <div class="text-slate-300">Maratona: H&lt;2:10 / F&lt;2:25</div>
      </div>
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2"><span>ğŸ”¥</span><span class="font-bold text-orange-400">Elite Nacional</span></div>
        <div class="text-slate-300">Maratona: H&lt;2:20 / F&lt;2:40</div>
      </div>
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2"><span>ğŸ’ª</span><span class="font-bold text-blue-400">Elite Regional</span></div>
        <div class="text-slate-300">Maratona: H&lt;2:35 / F&lt;2:55</div>
      </div>
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2"><span>ğŸ“ˆ</span><span class="font-bold text-green-400">Sub-Elite</span></div>
        <div class="text-slate-300">Maratona: H&lt;2:55 / F&lt;3:15</div>
      </div>
    </div>
    <p class="text-xs text-slate-400 mt-3">* ClassificaÃ§Ã£o baseada no melhor resultado histÃ³rico</p>
  </div>

  <!-- FILTROS -->
  <div class="flex gap-2 mb-4 overflow-x-auto pb-1">
    <button onclick="filtrar('todos')" class="filtro-btn active whitespace-nowrap bg-green-500 text-black font-black text-xs px-4 py-2 rounded-full">Todos</button>
    <button onclick="filtrar('M')" class="filtro-btn whitespace-nowrap bg-slate-700 text-slate-300 text-xs font-bold px-4 py-2 rounded-full">ğŸ‘¨ Masculino</button>
    <button onclick="filtrar('F')" class="filtro-btn whitespace-nowrap bg-slate-700 text-slate-300 text-xs font-bold px-4 py-2 rounded-full">ğŸ‘© Feminino</button>
  </div>

  <!-- RANKING -->
  <div id="loading" class="text-center py-12 text-slate-400">â³ Carregando...</div>
  <div id="lista" class="space-y-3 hidden"></div>
</div>

<nav class="fixed bottom-0 left-0 right-0 bg-slate-800 border-t border-slate-700 flex justify-around py-2 z-50">
  <a href="/" class="flex flex-col items-center text-xs text-slate-400 py-1 px-3"><span class="text-xl">ğŸ </span><span>InÃ­cio</span></a>
  <a href="/calendario.html" class="flex flex-col items-center text-xs text-slate-400 py-1 px-3"><span class="text-xl">ğŸ“…</span><span>Corridas</span></a>
  <a href="/social.html" class="flex flex-col items-center text-xs text-slate-400 py-1 px-3"><span class="text-xl">ğŸ“¸</span><span>Feed</span></a>
  <a href="/resultados.html" class="flex flex-col items-center text-xs text-green-400 py-1 px-3"><span class="text-xl">ğŸ†</span><span>Ranking</span></a>
  <a href="/perfil.html" class="flex flex-col items-center text-xs text-slate-400 py-1 px-3"><span class="text-xl">ğŸ‘¤</span><span>Perfil</span></a>
</nav>

<script>
let todos = [];

function nivel(pts) {
  if (pts >= 8000) return { label:'â­ Elite Mundial',    cor:'text-yellow-400', bg:'bg-yellow-900/30 border-yellow-500/30' };
  if (pts >= 5000) return { label:'ğŸ”¥ Elite Nacional',   cor:'text-orange-400', bg:'bg-orange-900/30 border-orange-500/30' };
  if (pts >= 3000) return { label:'ğŸ’ª Elite Regional',   cor:'text-blue-400',   bg:'bg-blue-900/30 border-blue-500/30' };
  if (pts >= 1500) return { label:'ğŸ“ˆ Sub-Elite',        cor:'text-green-400',  bg:'bg-green-900/30 border-green-500/30' };
  return                   { label:'ğŸŒ± AvanÃ§ado',        cor:'text-slate-400',  bg:'bg-slate-700/30 border-slate-600/30' };
}

function renderCard(a, i) {
  const n = nivel(a.totalPoints || 0);
  const medalhas = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
  return `
  <div class="border ${n.bg} rounded-2xl p-4 ${n.bg.split(' ')[0]}">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center font-black text-lg flex-shrink-0">
        ${i < 3 ? medalhas[i] : `<span class="text-sm text-slate-400">${i+1}</span>`}
      </div>
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-2">
          <p class="font-black text-sm truncate">${a.name}</p>
          <span class="text-xs ${n.cor} font-bold whitespace-nowrap">${n.label}</span>
        </div>
        <p class="text-xs text-slate-400">ğŸ“ ${a.city||''}/${a.state||''} Â· ${a.gender==='M'?'ğŸ‘¨':'ğŸ‘©'}</p>
      </div>
      <div class="text-right">
        <p class="font-black ${n.cor}">${(a.totalPoints||0).toLocaleString()}</p>
        <p class="text-xs text-slate-400">${a.totalRaces||0} provas</p>
      </div>
    </div>
  </div>`;
}

async function load() {
  const r = await fetch('/ranking?limit=100');
  const data = await r.json();
  todos = Array.isArray(data) ? data : (data.athletes || data.ranking || data.data || []);
  document.getElementById('loading').classList.add('hidden');
  renderLista(todos);
}

function renderLista(lista) {
  document.getElementById('lista').classList.remove('hidden');
  document.getElementById('lista').innerHTML = lista.length
    ? lista.map((a,i) => renderCard(a,i)).join('')
    : '<p class="text-center text-slate-400 py-8">Nenhum atleta encontrado</p>';
}

function filtrar(genero) {
  document.querySelectorAll('.filtro-btn').forEach(b => {
    b.className = 'filtro-btn whitespace-nowrap bg-slate-700 text-slate-300 text-xs font-bold px-4 py-2 rounded-full';
  });
  event.target.className = 'filtro-btn active whitespace-nowrap bg-green-500 text-black font-black text-xs px-4 py-2 rounded-full';
  const filtrado = genero === 'todos' ? todos : todos.filter(a => a.gender === genero);
  renderLista(filtrado);
}

load();
</script>
</body>
</html>
