<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>PACE â€” Corridas do Brasil</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
*{box-sizing:border-box;}
body{background:#0a0f1a;font-family:system-ui,sans-serif;overflow-x:hidden;}
.hero-bg{background:linear-gradient(135deg,#0a0f1a 0%,#0d2818 40%,#0a1628 100%);}
.card-glass{background:rgba(255,255,255,0.04);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.08);}
.grad-green{background:linear-gradient(135deg,#22c55e,#16a34a);}
.grad-blue{background:linear-gradient(135deg,#3b82f6,#1d4ed8);}
.grad-orange{background:linear-gradient(135deg,#f97316,#ea580c);}
.grad-purple{background:linear-gradient(135deg,#a855f7,#7c3aed);}
.pulse-dot{animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.slide-up{animation:slideUp .4s ease;}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.btn-primary{background:linear-gradient(135deg,#22c55e,#16a34a);transition:all .2s;box-shadow:0 4px 20px rgba(34,197,94,0.3);}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 8px 25px rgba(34,197,94,0.4);}
.stat-card{background:linear-gradient(135deg,rgba(34,197,94,0.1),rgba(22,163,74,0.05));border:1px solid rgba(34,197,94,0.2);}
::-webkit-scrollbar{display:none;}
</style>
</head>
<body class="text-white pb-20">

<!-- HEADER -->
<header class="hero-bg px-4 pt-safe">
  <div class="flex items-center justify-between py-4">
    <div class="flex items-center gap-2">
      <div class="w-9 h-9 grad-green rounded-xl flex items-center justify-center text-black font-black text-lg shadow-lg">P</div>
      <span class="font-black text-xl tracking-tight">PACE</span>
    </div>
    <div class="flex gap-2" id="header-btns">
      <a href="/entrar.html" id="btn-entrar" class="hidden text-xs bg-slate-800 border border-slate-700 px-3 py-2 rounded-xl font-bold">Entrar</a>
      <a href="/perfil.html" id="btn-perfil" class="hidden text-xs btn-primary text-black px-3 py-2 rounded-xl font-black">Meu Perfil</a>
    </div>
  </div>

  <!-- HERO -->
  <div class="py-6 slide-up">
    <div class="flex items-center gap-2 mb-3">
      <div class="w-2 h-2 rounded-full bg-green-400 pulse-dot"></div>
      <span class="text-xs text-green-400 font-bold uppercase tracking-widest">Plataforma Online</span>
    </div>
    <h1 class="text-3xl font-black leading-tight mb-2">
      Corridas do Brasil<br>
      <span class="text-transparent bg-clip-text" style="background:linear-gradient(90deg,#22c55e,#4ade80);-webkit-background-clip:text;">num sÃ³ lugar</span>
    </h1>
    <p class="text-slate-400 text-sm mb-6">Provas, ranking de atletas, PACE IA e muito mais para o corredor brasileiro.</p>
    <div class="flex gap-3">
      <a href="/calendario.html" class="btn-primary text-black font-black px-5 py-3 rounded-2xl text-sm flex-1 text-center">ğŸƒ Ver corridas</a>
      <a href="/elite.html" class="bg-slate-800 border border-slate-700 font-bold px-5 py-3 rounded-2xl text-sm text-center">ğŸ† Ranking</a>
    </div>
  </div>

  <!-- STATS -->
  <div class="grid grid-cols-3 gap-3 pb-6 mt-2">
    <div class="stat-card rounded-2xl p-3 text-center">
      <p class="text-2xl font-black text-green-400" id="stat-corridas">â€”</p>
      <p class="text-xs text-slate-400 mt-0.5">Corridas</p>
    </div>
    <div class="stat-card rounded-2xl p-3 text-center">
      <p class="text-2xl font-black text-green-400" id="stat-atletas">â€”</p>
      <p class="text-xs text-slate-400 mt-0.5">Atletas</p>
    </div>
    <div class="stat-card rounded-2xl p-3 text-center">
      <p class="text-2xl font-black text-green-400" id="stat-estados">27</p>
      <p class="text-xs text-slate-400 mt-0.5">Estados</p>
    </div>
  </div>
</header>

<!-- BUSCAR PROVAS COM INSCRIÃ‡Ã•ES -->
<section class="px-4 mt-6">
  <div class="flex items-center justify-between mb-3">
    <h2 class="font-black text-base">ğŸ”¥ InscriÃ§Ãµes Abertas</h2>
    <a href="/calendario.html?status=open" class="text-xs text-green-400 font-bold">Ver todas â†’</a>
  </div>
  <div id="inscricoes" class="space-y-3">
    <div class="card-glass rounded-2xl p-4 animate-pulse">
      <div class="h-4 bg-slate-700 rounded w-3/4 mb-2"></div>
      <div class="h-3 bg-slate-700 rounded w-1/2"></div>
    </div>
  </div>
</section>

<!-- MENU RÃPIDO -->
<section class="px-4 mt-6">
  <h2 class="font-black text-base mb-3">âš¡ Acesso rÃ¡pido</h2>
  <div class="grid grid-cols-2 gap-3">
    <a href="/calendario.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 grad-green rounded-xl flex items-center justify-center text-xl flex-shrink-0">ğŸ“…</div>
      <div>
        <p class="font-black text-sm">Corridas</p>
        <p class="text-xs text-slate-400">CalendÃ¡rio 2025</p>
      </div>
    </a>
    <a href="/elite.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 grad-orange rounded-xl flex items-center justify-center text-xl flex-shrink-0">ğŸ†</div>
      <div>
        <p class="font-black text-sm">Ranking</p>
        <p class="text-xs text-slate-400">Elite Brasil</p>
      </div>
    </a>
    <a href="/ia.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 grad-blue rounded-xl flex items-center justify-center text-xl flex-shrink-0">ğŸƒ</div>
      <div>
        <p class="font-black text-sm">PACE IA</p>
        <p class="text-xs text-slate-400">Seu coach pessoal</p>
      </div>
    </a>
    <a href="/pacematch.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 grad-purple rounded-xl flex items-center justify-center text-xl flex-shrink-0">ğŸ’œ</div>
      <div>
        <p class="font-black text-sm">PACE Match</p>
        <p class="text-xs text-slate-400">Parceiros de treino</p>
      </div>
    </a>
    <a href="/calculadoras.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0" style="background:linear-gradient(135deg,#06b6d4,#0891b2);">âš¡</div>
      <div>
        <p class="font-black text-sm">Calculadoras</p>
        <p class="text-xs text-slate-400">Pace, tempo, ritmo</p>
      </div>
    </a>
    <a href="/loja.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0" style="background:linear-gradient(135deg,#f59e0b,#d97706);">ğŸ‘•</div>
      <div>
        <p class="font-black text-sm">Loja PACE</p>
        <p class="text-xs text-slate-400">Camisas oficiais</p>
      </div>
    </a>
    <a href="/social.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0" style="background:linear-gradient(135deg,#ec4899,#db2777);">ğŸ“¸</div>
      <div>
        <p class="font-black text-sm">Feed Social</p>
        <p class="text-xs text-slate-400">Compartilhe corridas</p>
      </div>
    </a>
    <a href="/assessorias.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform">
      <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0" style="background:linear-gradient(135deg,#10b981,#059669);">ğŸ¤</div>
      <div>
        <p class="font-black text-sm">Assessorias</p>
        <p class="text-xs text-slate-400">Clubes de corrida</p>
      </div>
    </a>
  </div>
</section>

<!-- TOP ATLETAS -->
<section class="px-4 mt-6">
  <div class="flex items-center justify-between mb-3">
    <h2 class="font-black text-base">â­ Top Atletas</h2>
    <a href="/elite.html" class="text-xs text-green-400 font-bold">Ver ranking â†’</a>
  </div>
  <div id="top-atletas" class="space-y-2"></div>
</section>

<!-- PRÃ“XIMAS CORRIDAS -->
<section class="px-4 mt-6 mb-4">
  <div class="flex items-center justify-between mb-3">
    <h2 class="font-black text-base">ğŸ“… PrÃ³ximas corridas</h2>
    <a href="/calendario.html" class="text-xs text-green-400 font-bold">Ver todas â†’</a>
  </div>
  <div id="proximas" class="space-y-3"></div>
</section>

<!-- NAV -->
<nav class="fixed bottom-0 left-0 right-0 z-50" style="background:rgba(10,15,26,0.95);backdrop-filter:blur(20px);border-top:1px solid rgba(255,255,255,0.08);">
  <div class="flex justify-around py-2">
    <a href="/" class="flex flex-col items-center text-xs text-green-400 py-1 px-3"><span class="text-xl">ğŸ </span><span class="font-bold">InÃ­cio</span></a>
    <a href="/calendario.html" class="flex flex-col items-center text-xs text-slate-500 py-1 px-3"><span class="text-xl">ğŸ“…</span><span>Corridas</span></a>
    <a href="/elite.html" class="flex flex-col items-center text-xs text-slate-500 py-1 px-3"><span class="text-xl">ğŸ†</span><span>Ranking</span></a>
    <a href="/loja.html" class="flex flex-col items-center text-xs text-slate-500 py-1 px-3"><span class="text-xl">ğŸ‘•</span><span>Loja</span></a>
    <a href="/ia.html" class="flex flex-col items-center text-xs text-slate-500 py-1 px-3"><span class="text-xl">ğŸƒ</span><span>IA</span></a>
    <a href="/perfil.html" class="flex flex-col items-center text-xs text-slate-500 py-1 px-3"><span class="text-xl">ğŸ‘¤</span><span>Perfil</span></a>
  </div>
</nav>

<script>
const token = localStorage.getItem('pace_token');
const user = localStorage.getItem('pace_user') ? JSON.parse(localStorage.getItem('pace_user')) : null;

// Header
if (token && user) {
  document.getElementById('btn-perfil').classList.remove('hidden');
  document.getElementById('btn-perfil').textContent = 'ğŸ‘¤ ' + user.name?.split(' ')[0];
} else {
  document.getElementById('btn-entrar').classList.remove('hidden');
}

// Stats
fetch('/ranking/stats').then(r=>r.json()).then(d=>{
  document.getElementById('stat-corridas').textContent = d.totalCorridas?.toLocaleString('pt-BR') || 'â€”';
  document.getElementById('stat-atletas').textContent = d.totalAtletas?.toLocaleString('pt-BR') || 'â€”';
}).catch(()=>{});

// InscriÃ§Ãµes abertas
fetch('/races?status=open&limit=3').then(r=>r.json()).then(races=>{
  const el = document.getElementById('inscricoes');
  if (!races?.length) { el.innerHTML='<p class="text-slate-500 text-sm text-center py-4">Buscando provas...</p>'; return; }
  el.innerHTML = races.map(r => {
    const data = r.date ? new Date(r.date).toLocaleDateString('pt-BR',{day:'2-digit',month:'short'}) : '';
    return `<a href="${r.registrationLink || '/calendario.html'}" ${r.registrationLink?'target="_blank"':''} class="card-glass rounded-2xl p-4 flex items-center gap-4 active:scale-95 transition-transform block">
      <div class="w-12 h-12 grad-green rounded-xl flex flex-col items-center justify-center flex-shrink-0">
        <span class="text-black font-black text-xs leading-none">${data.split(' ')[0]}</span>
        <span class="text-black text-xs leading-none uppercase">${data.split(' ')[1]||''}</span>
      </div>
      <div class="flex-1 min-w-0">
        <p class="font-black text-sm leading-tight">${r.name}</p>
        <p class="text-xs text-slate-400 mt-0.5">ğŸ“ ${r.city||''}, ${r.state||''} Â· ${r.distances||''}</p>
      </div>
      ${r.registrationLink ? '<span class="text-green-400 text-xs font-bold flex-shrink-0">Inscrever â†’</span>' : ''}
    </a>`;
  }).join('');
}).catch(()=>{ document.getElementById('inscricoes').innerHTML=''; });

// Top atletas
fetch('/ranking?limit=3').then(r=>r.json()).then(atletas=>{
  const ICONE = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
  document.getElementById('top-atletas').innerHTML = atletas.slice(0,3).map((a,i)=>`
    <div class="card-glass rounded-2xl p-3 flex items-center gap-3">
      <span class="text-2xl">${ICONE[i]}</span>
      <div class="flex-1">
        <p class="font-black text-sm">${a.name}</p>
        <p class="text-xs text-slate-400">${a.equipe||''} Â· ${a.nivel||''}</p>
      </div>
      <p class="text-green-400 font-black text-sm">${(a.totalPoints||0).toLocaleString('pt-BR')}pts</p>
    </div>`).join('');
}).catch(()=>{});

// PrÃ³ximas corridas
fetch('/races?limit=4&sort=date').then(r=>r.json()).then(races=>{
  const el = document.getElementById('proximas');
  if(!races?.length){el.innerHTML='<p class="text-slate-500 text-sm text-center py-2">Nenhuma corrida encontrada</p>';return;}
  el.innerHTML = races.map(r=>{
    const data = r.date ? new Date(r.date).toLocaleDateString('pt-BR',{day:'2-digit',month:'short',year:'2-digit'}) : 'A confirmar';
    return `<a href="/calendario.html" class="card-glass rounded-2xl p-4 flex items-center gap-3 active:scale-95 transition-transform block">
      <div class="w-10 h-10 rounded-xl bg-slate-700 flex items-center justify-center text-lg flex-shrink-0">ğŸ…</div>
      <div class="flex-1 min-w-0">
        <p class="font-bold text-sm truncate">${r.name}</p>
        <p class="text-xs text-slate-400">ğŸ“ ${r.city||r.state||''} Â· ğŸ“… ${data}</p>
      </div>
    </a>`;
  }).join('');
}).catch(()=>{});
</script>
</body>
</html>
